state_top: top.sls

file_client: local

file_roots:
 <%= config[:salt_env] %>:
   - <%= File.join(config[:root_path], config[:salt_file_root], 'states') %>

pillar_roots:
 <%= config[:salt_env] %>:
   - <%= File.join(config[:root_path], config[:salt_file_root], 'pillar') %>

extension_modules: <%= File.join(config[:root_path], config[:salt_file_root], 'python') %>

ext_pillar:
  - dewey_static:
      environment: vagrant
      role_file: <%= File.join(config[:root_path], config[:salt_config], 'dewey.yml') %>
  - secrets_hybrid:
      dewey_url: http://dewey.soma.plos.org/api
      environment: dev
      secrets_file: <%= File.join(config[:root_path], config[:salt_config], 'secrets.yml') %>
  - users:
      userdir: <%= File.join(config[:root_path], config[:salt_file_root], 'auth') %>
      environemnt: dev
